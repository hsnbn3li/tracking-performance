<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ØªØªØ¨Ø¹ Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚ â€” Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨</title>
<style>
:root{
  --bg:#ffffff;
  --card:#f8fafc;
  --accent:#0b9f6b;
  --muted:#475569;
  --border:#e6eef6;
  --success-bg: #ecfdf5;
  --success-border: #bbf7d0;
}
body{
  margin:0;font-family:"Segoe UI", Tahoma, Arial, "Noto Naskh Arabic", system-ui;
  background: var(--bg); color:#0b1220; direction:rtl; padding:18px;
}
.container{max-width:980px;margin:0 auto}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px}
label{display:block;margin-bottom:6px;color:var(--muted);font-weight:700}
.top-row input[type="date"], .top-row input[type="number"]{
  width:100%; padding:12px 14px; border-radius:10px; border:1px solid #e2e8f0; background:#fff; color:inherit;
  box-sizing:border-box; font-size:16px; font-weight:700;
}
.service-row{display:flex;gap:8px;align-items:center;padding:8px;border-radius:10px;border:1px solid rgba(2,6,23,0.03);margin-bottom:8px;background:#fff}
.service-label{font-weight:800;min-width:160px}
.count-badge{background:#0b9f6b;color:#fff;padding:6px 10px;border-radius:999px;font-weight:800;margin-left:8px}
.entries{display:flex;gap:6px;flex-wrap:wrap;flex:1}
.entry-chip{background:#fff;padding:6px 8px;border-radius:8px;border:1px solid var(--border)}
.actions{display:flex;gap:8px;margin-top:12px}
.btn{padding:10px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:800;font-size:15px}
.btn.primary{background:#0b9f6b;color:#fff}
.btn.ghost{background:transparent;border:1px solid rgba(2,6,23,0.06)}
.preview{white-space:pre-wrap;background:#fff;padding:12px;border-radius:8px;border:1px solid var(--border);margin-top:8px;font-family:inherit;font-size:15px}
.shift-card{border-radius:10px;padding:10px;border:1px solid var(--border);background:linear-gradient(180deg,#ffffff,#fbfdff);margin-bottom:12px}
.shift-card.success{background:var(--success-bg);border-color:var(--success-border)}
.shift-title{font-weight:900;display:flex;align-items:center;gap:8px}
.shift-trophy{font-size:18px}
hr{border:none;border-top:1px solid #e6eef6;margin:12px 0}
</style>
</head>
<body>
<div class="container">
<div class="card">
<h2>ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø¯Ø§Ø¡</h2>
<div class="top-row" style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px">
<div style="flex:1;min-width:180px">
<label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
<input id="date" type="date" />
</div>
<div style="flex:1;min-width:160px">
<label>Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù (Ø±ÙŠØ§Ù„)</label>
<input id="targetInput" type="number" value="586" />
</div>
</div>
<div class="actions" style="margin-top:12px">
<button class="btn primary" id="fillDemo">Ù…Ù„Ø¡ Ù…Ø«Ø§Ù„</button>
<button class="btn ghost" id="clearAll">Ù…Ø³Ø­</button>
</div>
</div>

<div id="morningCard" class="card shift-card">
<div class="shift-title" id="morningTitle"><h3 style="margin:0">Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</h3><span id="morningTrophy" class="shift-trophy" style="display:none">ğŸ†</span></div>
<div id="morningServices"></div>
<div style="margin-top:8px;font-weight:800">Ø§Ù„Ù…Ø­Ù‚Ù‚: <span id="morningTotal">0</span> Ø±.Ø³ <span id="morningTrophyTotal" style="display:none">ğŸ†</span></div>
</div>

<hr>

<div id="eveningCard" class="card shift-card">
<div class="shift-title" id="eveningTitle"><h3 style="margin:0">Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</h3><span id="eveningTrophy" class="shift-trophy" style="display:none">ğŸ†</span></div>
<div id="eveningServices"></div>
<div style="margin-top:8px;font-weight:800">Ø§Ù„Ù…Ø­Ù‚Ù‚: <span id="eveningTotal">0</span> Ø±.Ø³ <span id="eveningTrophyTotal" style="display:none">ğŸ†</span></div>
</div>

<div class="card">
<div style="font-weight:900">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ: <span id="grandTotal">0</span> Ø±.Ø³</div>
<div class="actions" style="margin-top:12px">
<button class="btn primary" id="shareBtn">Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</button>
<button class="btn ghost" id="copyBtn">Ù†Ø³Ø® Ø§Ù„Ù†Øµ</button>
</div>
<div style="margin-top:12px;font-weight:800">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©:</div>
<div class="preview" id="messagePreview">â€” Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª â€”</div>
</div>
</div>

<script>
const SERVICES = ["Ø¨Ù„Ø³ Ø¯ÙˆÙ„ÙŠ","Ø¨Ù„Ø³ Ø¯Ø§Ø®Ù„ÙŠ","Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø¯ÙˆÙ„ÙŠ","Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ","Ø§Ø³Ù…ÙŠØ²","Ø¹Ù†ÙˆÙ†Ø©","Ø­Ù…Ø§ÙŠØ©","ÙƒØ±ØªÙˆÙ†","ØªØºÙ„ÙŠÙ","Ø´Ø¯ ÙˆØ±Ø¨Ø·"];
const SPECIAL_FIRE_EMOJI_SERVICES = ["Ø§Ø³Ù…ÙŠØ²","Ø¨Ù„Ø³ Ø¯ÙˆÙ„ÙŠ"];
const state={morning:{},evening:{},target:586};
SERVICES.forEach(s=>{state.morning[s]=[];state.evening[s]=[];});
function toEnglishNumbers(str){return str.replace(/[Ù -Ù©Û°-Û¹]/g,d=>String.fromCharCode(d.charCodeAt(0)<=1776?48+d.charCodeAt(0)-1632:48+d.charCodeAt(0)-1776));}
function createServiceRows(container,shiftKey){container.innerHTML="";SERVICES.forEach(s=>{const row=document.createElement("div");row.className="service-row";const label=document.createElement("div");label.className="service-label";label.textContent=s;const badge=document.createElement("span");badge.className="count-badge";badge.textContent="0";label.appendChild(badge);const entries=document.createElement("div");entries.className="entries";const addBtn=document.createElement("button");addBtn.className="btn primary";addBtn.textContent="Ø¥Ø¶Ø§ÙØ©";addBtn.addEventListener("click",()=>{const v=prompt("Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº (Ø±ÙŠØ§Ù„) Ù„Ù€ "+s);if(v===null)return;const n=Number(toEnglishNumbers(v));if(isNaN(n)||n<=0){alert("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±");return;}state[shiftKey][s].push(n);renderAll();});const clearBtn=document.createElement("button");clearBtn.className="btn ghost";clearBtn.textContent="Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„";clearBtn.addEventListener("click",()=>{if(confirm("Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„Ø§ØªØŸ")){state[shiftKey][s]=[];renderAll();}});const actions=document.createElement("div");actions.style.display="flex";actions.style.gap="6px";actions.appendChild(addBtn);actions.appendChild(clearBtn);row.appendChild(label);row.appendChild(entries);row.appendChild(actions);row._service=s;row._badge=badge;row._entries=entries;container.appendChild(row);});}
function sumEntries(obj){return Object.values(obj).flat().reduce((a,b)=>a+b,0)||0;}
function toggleSuccess(shift,sum,target){const card=document.getElementById(shift+"Card");const titleTrophy=document.getElementById(shift+"Trophy");const trophyTotal=document.getElementById(shift+"TrophyTotal");if(sum>target){card.classList.add("success");titleTrophy.style.display="inline";trophyTotal.style.display="inline";}else{card.classList.remove("success");titleTrophy.style.display="none";trophyTotal.style.display="none";}}
function buildMessagePreview(){
const dateInput=document.getElementById("date").value;
let dateStr="";
if(dateInput){const d=new Date(dateInput);const dd=("0"+d.getDate()).slice(-2);const mm=("0"+(d.getMonth()+1)).slice(-2);const yyyy=d.getFullYear();dateStr=dd+"/"+mm+"/"+yyyy;}else{const d=new Date();const dd=("0"+d.getDate()).slice(-2);const mm=("0"+(d.getMonth()+1)).slice(-2);const yyyy=d.getFullYear();dateStr=dd+"/"+mm+"/"+yyyy;}
const target=Number(document.getElementById("targetInput").value||586);
let lines=[];
lines.push("*ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ ÙˆØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯* ğŸ’ª");
lines.push(dateStr);
lines.push("");
["morning","evening"].forEach(shift=>{
lines.push(shift==="morning"?"*Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©:*":"*Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©:*"+(sumEntries(state[shift])>target?" ğŸ†":""));
SERVICES.forEach(s=>{const arr=state[shift][s]||[];const count=arr.length;const sum=arr.reduce((a,b)=>a+b,0)||0;if(count>0){const fire=SPECIAL_FIRE_EMOJI_SERVICES.includes(s)?" ğŸ”¥":"";lines.push(`${s} âœ… ${sum}${fire}`);}else lines.push(`${s} âŒ`);});
lines.push("___");
lines.push(`Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù: ${target}`);
lines.push(`Ø§Ù„Ù…Ø­Ù‚Ù‚: ${sumEntries(state[shift])}${sumEntries(state[shift])>target?" ğŸ†":""}`);
lines.push("");
});
lines.push("___");
lines.push(`Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ: ${sumEntries(state.morning)+sumEntries(state.evening)}`);
const message=lines.join("\n");
document.getElementById("messagePreview").textContent=message;
return message;
}
function renderAll(){
["morning","evening"].forEach(shift=>{const rows=document.querySelectorAll(`#${shift}Services .service-row`);rows.forEach(row=>{const s=row._service,arr=state[shift][s]||[];row._entries.innerHTML="";arr.forEach((v,i)=>{const chip=document.createElement("div");chip.className="entry-chip";chip.textContent=v.toLocaleString('ar-EG')+" Ø±.Ø³";const remove=document.createElement("small");remove.textContent=" âœ–";remove.style.marginLeft="6px";remove.style.cursor="pointer";remove.addEventListener("click",()=>{state[shift][s].splice(i,1);renderAll();});chip.appendChild(remove);row._entries.appendChild(chip);});row._badge.textContent=arr.length;});});
const mSum=sumEntries(state.morning);const eSum=sumEntries(state.evening);
document.getElementById("morningTotal").textContent=mSum.toLocaleString('ar-EG');
document.getElementById("eveningTotal").textContent=eSum.toLocaleString('ar-EG');
document.getElementById("grandTotal").textContent=(mSum+eSum).toLocaleString('ar-EG')+" Ø±.Ø³";
const target=Number(document.getElementById("targetInput").value||586);
toggleSuccess("morning",mSum,target);
toggleSuccess("evening",eSum,target);
buildMessagePreview();
}
function shareOnWhatsApp(){const text=buildMessagePreview();const url="https://api.whatsapp.com/send?text="+encodeURIComponent(text);window.open(url,"_blank");}
function copyText(){navigator.clipboard.writeText(buildMessagePreview()).then(()=>{alert("Ù†ÙØ³Ø® Ø§Ù„Ù†Øµ âœ…");}).catch(()=>alert("ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®"));}
document.getElementById("shareBtn").addEventListener("click",shareOnWhatsApp);
document.getElementById("copyBtn").addEventListener("click",copyText);
document.getElementById("fillDemo").addEventListener("click",()=>{SERVICES.forEach((s,i)=>{state.morning[s]=(i%2===0)?[300,50]:[];state.evening[s]=(i%3===0)?[200]:[];});document.getElementById("date").value=new Date().toISOString().slice(0,10);document.getElementById("targetInput").value=586;renderAll();});
document.getElementById("clearAll").addEventListener("click",()=>{SERVICES.forEach(s=>{state.morning[s]=[];state.evening[s]=[];});document.getElementById("date").value="";document.getElementById("targetInput").value=586;renderAll();});

createServiceRows(document.getElementById("morningServices"),"morning");
createServiceRows(document.getElementById("eveningServices"),"evening");
document.getElementById("date").value=new Date().toISOString().slice(0,10);
document.getElementById("targetInput").value=586;
renderAll();
</script>
</body>
</html>
